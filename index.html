<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéØ Farcaster Profile Optimizer</title>
    
    <!-- Farcaster Frame Meta Tags -->
    <meta property="fc:frame" content="vNext" />
    <meta property="fc:frame:image" content="https://farcaster-profile-optimizer.vercel.app/og-image.png" />
    <meta property="fc:frame:button:1" content="Open App" />
    <meta property="fc:frame:button:1:action" content="link" />
    <meta property="fc:frame:button:1:target" content="https://farcaster-profile-optimizer.vercel.app" />
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="üéØ Farcaster Profile Optimizer" />
    <meta property="og:description" content="AI-powered analysis to make your profile stand out" />
    <meta property="og:image" content="https://farcaster-profile-optimizer.vercel.app/og-image.png" />
    <meta property="og:url" content="https://farcaster-profile-optimizer.vercel.app" />
    <meta property="og:type" content="website" />
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="üéØ Farcaster Profile Optimizer" />
    <meta name="twitter:description" content="AI-powered analysis to make your profile stand out" />
    <meta name="twitter:image" content="https://farcaster-profile-optimizer.vercel.app/og-image.png" />
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        h1 {
            font-size: 36px;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            color: #666;
            margin-bottom: 40px;
            font-size: 16px;
        }

        .input-group {
            margin-bottom: 30px;
        }

        label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #333;
        }

        input[type="text"] {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            width: 100%;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        button:active {
            transform: translateY(0);
        }

        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .loading {
            display: none;
            text-align: center;
            margin: 30px 0;
            color: #667eea;
        }

        .loading.active {
            display: block;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .results {
            display: none;
            margin-top: 40px;
        }

        .results.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .profile-header {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
            border-radius: 15px;
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin-right: 20px;
            border: 3px solid #667eea;
        }

        .profile-info h2 {
            font-size: 24px;
            margin-bottom: 5px;
            color: #333;
        }

        .profile-info p {
            color: #666;
            margin-bottom: 10px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-value {
            font-size: 28px;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #666;
            font-size: 14px;
        }

        .score-section {
            text-align: center;
            margin: 30px 0;
            padding: 30px;
            background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
            border-radius: 15px;
        }

        .score-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: conic-gradient(#667eea var(--score), #e0e0e0 0);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            position: relative;
        }

        .score-inner {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            font-weight: bold;
            color: #667eea;
        }

        .section {
            margin: 25px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .section h3 {
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .badge {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .section ul {
            list-style: none;
            padding: 0;
        }

        .section li {
            padding: 10px 0;
            border-bottom: 1px solid #e0e0e0;
            color: #555;
        }

        .section li:last-child {
            border-bottom: none;
        }

        .improved-bio {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #667eea;
            margin-top: 15px;
            position: relative;
        }

        .copy-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            width: auto;
        }

        .copy-btn:hover {
            background: #5568d3;
        }

        .error {
            background: #fee;
            color: #c33;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #c33;
        }

        /* Mobile Optimization */
        @media (max-width: 768px) {
            .container {
                padding: 15px !important;
                margin: 10px !important;
            }
            
            h1 {
                font-size: 24px !important;
            }
            
            .subtitle {
                font-size: 14px !important;
            }
            
            input[type="text"] {
                font-size: 16px !important;
                padding: 12px !important;
            }
            
            button {
                font-size: 14px !important;
                padding: 12px 24px !important;
            }
            
            .profile-header {
                flex-direction: column !important;
                text-align: center !important;
            }
            
            .profile-avatar {
                margin: 0 auto 15px !important;
            }
            
            .stats-grid {
                grid-template-columns: 1fr 1fr !important;
                gap: 10px !important;
            }
            
            .stat-card {
                padding: 12px !important;
            }
            
            .section {
                padding: 15px !important;
            }
        }

        @media (max-width: 480px) {
            .stats-grid {
                grid-template-columns: 1fr !important;
            }
            
            h1 {
                font-size: 20px !important;
            }
            
            .score-circle {
                width: 100px !important;
                height: 100px !important;
                font-size: 28px !important;
            }
        }
    </style>
</head>
<body>
    <!-- Creator Credit Banner -->
    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 8px 0; text-align: center; font-size: 12px; position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
        Created by: <a href="https://warpcast.com/paypaleth.eth" target="_blank" style="color: #fff; text-decoration: none; font-weight: bold;">paypaleth.eth</a>
    </div>

    <div class="container">
        <h1>üéØ Farcaster Profile Optimizer</h1>
        <p class="subtitle">AI-powered analysis to make your profile stand out</p>

        <div class="input-group">
            <label for="username">Enter your Farcaster username</label>
            <input type="text" id="username" placeholder="username">
        </div>

        <button onclick="analyzeProfile()">Analyze Profile</button>

        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Fetching profile data...</p>
        </div>

        <div class="results" id="results">
            <div class="profile-header">
                <img src="" alt="Profile" class="profile-avatar" id="avatar">
                <div class="profile-info">
                    <h2 id="displayName"></h2>
                    <p id="bio"></p>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="followers">0</div>
                    <div class="stat-label">Followers</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="following">0</div>
                    <div class="stat-label">Following</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="casts">0</div>
                    <div class="stat-label">Casts</div>
                </div>
            </div>

            <div class="score-section">
                <div class="score-circle" id="scoreCircle">
                    <div class="score-inner" id="scoreValue">-</div>
                </div>
                <h3>Overall Profile Score</h3>
            </div>

            <div class="section">
                <h3>‚ú® Strengths <span class="badge">AI POWERED</span></h3>
                <ul id="strengths"></ul>
            </div>

            <div class="section">
                <h3>‚ö†Ô∏è Areas for Improvement</h3>
                <ul id="improvements"></ul>
            </div>

            <div class="section">
                <h3>üí° AI Suggestions</h3>
                <ul id="suggestions"></ul>
            </div>

            <div class="section">
                <h3>‚úçÔ∏è Improved Bio Suggestion</h3>
                <div class="improved-bio">
                    <button class="copy-btn" onclick="copyBio()">üìã Copy Bio</button>
                    <p id="improvedBio"></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const NEYNAR_API_KEY = 'NEYNAR-API-DOCS';

        async function analyzeProfile() {
            const username = document.getElementById('username').value.trim();
            
            if (!username) {
                alert('Please enter a username');
                return;
            }

            const loading = document.getElementById('loading');
            const results = document.getElementById('results');
            
            loading.classList.add('active');
            results.classList.remove('active');

            try {
                const response = await fetch(`https://api.neynar.com/v2/farcaster/user/by_username?username=${username}`, {
                    headers: {
                        'accept': 'application/json',
                        'api_key': NEYNAR_API_KEY
                    }
                });

                if (!response.ok) {
                    throw new Error('User not found');
                }

                const data = await response.json();
                const user = data.result.user;

                displayProfile(user);
                
                loading.classList.remove('active');
                results.classList.add('active');

            } catch (error) {
                loading.classList.remove('active');
                alert('Error: ' + error.message);
            }
        }

        function displayProfile(user) {
            document.getElementById('avatar').src = user.pfp_url || '';
            document.getElementById('displayName').textContent = user.display_name || user.username;
            document.getElementById('bio').textContent = user.profile.bio.text || 'No bio available';
            document.getElementById('followers').textContent = user.follower_count || 0;
            document.getElementById('following').textContent = user.following_count || 0;
            
            fetch(`https://api.neynar.com/v2/farcaster/user/bulk?fids=${user.fid}`, {
                headers: {
                    'accept': 'application/json',
                    'api_key': NEYNAR_API_KEY
                }
            })
            .then(res => res.json())
            .then(data => {
                const castCount = data.users[0]?.active_status?.total_casts || 0;
                document.getElementById('casts').textContent = castCount;
            });

            const analysis = analyzeUserProfile(user);
            
            document.getElementById('scoreValue').textContent = analysis.score;
            document.getElementById('scoreCircle').style.setProperty('--score', `${analysis.score * 3.6}deg`);
            
            document.getElementById('strengths').innerHTML = analysis.strengths.map(s => `<li>${s}</li>`).join('');
            document.getElementById('improvements').innerHTML = analysis.improvements.map(i => `<li>${i}</li>`).join('');
            document.getElementById('suggestions').innerHTML = analysis.suggestions.map(s => `<li>${s}</li>`).join('');
            document.getElementById('improvedBio').textContent = analysis.improvedBio;
        }

        function analyzeUserProfile(user) {
            const score = calculateScore(user);
            const strengths = [];
            const improvements = [];
            const suggestions = [];

            if (user.follower_count > 100) {
                strengths.push('Strong follower base showing good engagement');
            } else {
                improvements.push('Build your follower base by engaging more with the community');
                suggestions.push('Post consistently and reply to others\' casts');
            }

            if (user.profile.bio.text && user.profile.bio.text.length > 50) {
                strengths.push('Detailed bio that helps others understand your profile');
            } else {
                improvements.push('Bio is too short or missing');
                suggestions.push('Write a compelling bio that showcases your personality and interests');
            }

            if (user.pfp_url) {
                strengths.push('Profile picture is set, making your profile more recognizable');
            } else {
                improvements.push('Add a profile picture');
                suggestions.push('Use a clear, professional photo or unique avatar');
            }

            if (user.following_count > 50) {
                strengths.push('Actively following others, which helps with engagement');
            } else {
                improvements.push('Follow more interesting accounts');
                suggestions.push('Find and follow thought leaders in your areas of interest');
            }

            const improvedBio = generateImprovedBio(user);

            return {
                score,
                strengths,
                improvements,
                suggestions,
                improvedBio
            };
        }

        function calculateScore(user) {
            let score = 0;
            
            if (user.pfp_url) score += 20;
            if (user.profile.bio.text && user.profile.bio.text.length > 50) score += 20;
            if (user.follower_count > 10) score += 15;
            if (user.follower_count > 100) score += 15;
            if (user.following_count > 20) score += 15;
            if (user.profile.bio.verified_addresses && user.profile.bio.verified_addresses.length > 0) score += 15;

            return Math.min(score, 100);
        }

        function generateImprovedBio(user) {
            const currentBio = user.profile.bio.text || '';
            
            if (currentBio.length < 50) {
                return `${user.display_name || user.username} | Farcaster enthusiast sharing insights on crypto, web3, and decentralized social networks. Building the future of social media, one cast at a time üöÄ`;
            }
            
            return `${currentBio} | Active Farcaster member connecting with the community üåê`;
        }

        function copyBio() {
            const bioText = document.getElementById('improvedBio').textContent;
            navigator.clipboard.writeText(bioText).then(() => {
                alert('Bio copied to clipboard!');
            });
        }
    </script>
</body>
</html>
